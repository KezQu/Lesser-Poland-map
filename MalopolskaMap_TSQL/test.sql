USE MalopolskaMap;

--INSERT INTO Primitives.Point VALUES
--(1, CONVERT(dbo.Point, '(0,0)')),
--(2, CONVERT(dbo.Point, '(0,1)')),
--(3, CONVERT(dbo.Point, '(1,1)'));


--INSERT INTO Primitives.MultiLine 
--SELECT 1, '[' + STRING_AGG(point.ToString(), ';') + ']' FROM Primitives.Point;
--GO
--SELECT id, multiline FROM Primitives.MultiLine;

--SELECT multiline.ToString() FROM Areas.Border B
--JOIN Primitives.MultiLine ML ON ML.id = B.multiline_id
--JOIN Areas.AdministrativeArea AA ON AA.id = B.area_id
--WHERE name LIKE 'Zielone';

--SELECT point.ToString(), P.* FROM Areas.Place P 
--JOIN Primitives.Point Pt ON Pt.id = P.point_id
--WHERE name LIKE 'Tarnów';

--SELECT id FROM Areas.AdministrativeArea ORDER BY id;
--GO

--GO
--SELECT TOP(100) dbo.Area(borderPolygon) AS borderPolygon FROM Areas.AdministrativeArea WHERE name LIKE 'województwo ma%opolskie';
--SELECT name, borderPolygon.ToString() FROM Areas.AreaWithRescaledPolygon(1) WHERE name LIKE 'Kraków';
--SELECT name, dbo.IsInside(borderPolygon, CONVERT(dbo.Point,'(216.0,103.0)')) FROM Areas.AdministrativeArea WHERE name LIKE 'Zielone';

--INSERT INTO Areas.RescaledArea 
--SELECT id, dbo.ChangePolygonScale(borderPolygon, 2) AS borderPolygon FROM Areas.AdministrativeArea;

--GO
--SELECT * FROM dbo.AreaWithRescaledPolygon();
--SELECT * FROM dbo.CheckIfPointIsInside(CONVERT(dbo.Point,'(216.0,103.0)'),14296, 15510889);
--SELECT CONVERT(dbo.Polygon, '[(91.60589604344453,127.456);(152.06578743211793,99.00800000000001);(103.8200155159038,53.76);(73.69185415050427,86.24);(91.60589604344453,127.456)]') AS area;
SELECT dbo.Area(borderPolygon) AS area FROM Areas.AdministrativeArea WHERE name LIKE 'Andrychów';

DECLARE @g geometry;  
SET @g = geometry::STGeomFromText('POLYGON((27.02 86.52, 26.997 86.44, 27.028 86.435, 27.022 86.419, 26.975 86.337, 27.005 86.315, 26.972 86.257, 26.917 86.208, 26.907 86.203, 26.897 86.201, 26.887 86.197, 26.878 86.192, 26.862 86.182, 26.825 86.149, 26.78 86.099, 26.755 86.077, 26.702 86.028, 26.62 85.971, 26.555 85.926, 26.499 85.884, 26.471 85.868, 26.427 85.852, 26.41 85.847, 26.392 85.838, 26.364 85.823, 26.261 85.764, 26.254 85.767, 26.244 85.761, 26.231 85.753, 26.224 85.747, 26.232 85.744, 26.191 85.716, 26.183 85.709, 26.122 85.663, 26.104 85.646, 26.087 85.637, 26.087 85.625, 26.108 85.618, 26.137 85.615, 26.165 85.595, 26.181 85.574, 26.203 85.547, 26.214 85.519, 26.218 85.507, 26.235 85.486, 26.253 85.45, 26.268 85.433, 26.282 85.426, 26.309 85.393, 26.318 85.4, 26.327 85.399, 26.374 85.383, 26.382 85.378, 26.388 85.374, 26.394 85.366, 26.394 85.333, 26.418 85.335, 26.445 85.323, 26.46 85.31, 26.464 85.303, 26.502 85.3, 26.54 85.279, 26.55 85.276, 26.564 85.282, 26.581 85.3, 26.599 85.31, 26.624 85.312, 26.647 85.301, 26.658 85.283, 26.684 85.282, 26.727 85.279, 26.759 85.283, 26.787 85.283, 26.82 85.275, 26.858 85.271, 26.893 85.261, 26.939 85.263, 26.963 85.251, 26.973 85.231, 26.999 85.199, 27.027 85.183, 27.036 85.18, 27.058 85.182, 27.073 85.182, 27.093 85.172, 27.106 85.166, 27.155 85.16, 27.167 85.155, 27.177 85.141, 27.186 85.129, 27.231 85.118, 27.239 85.104, 27.251 85.076, 27.259 85.072, 27.324 85.08, 27.335 85.074, 27.344 85.049, 27.353 85.033, 27.365 85.019, 27.378 85.017, 27.392 85.022, 27.394 85.03, 27.409 85.046, 27.423 85.047, 27.436 85.04, 27.441 85.027, 27.446 85.002, 27.457 84.988, 27.479 84.983, 27.502 84.983, 27.518 84.974, 27.526 84.969, 27.556 84.949, 27.575 84.947, 27.588 84.936, 27.594 84.926, 27.602 84.918, 27.617 84.91, 27.612 84.876, 27.621 84.863, 27.644 84.854, 27.666 84.84, 27.669 84.811, 27.652 84.783, 27.657 84.774, 27.654 84.752, 27.64 84.738, 27.645 84.724, 27.633 84.702, 27.622 84.699, 27.607 84.666, 27.612 84.654, 27.632 84.644, 27.649 84.643, 27.66 84.64, 27.66 84.63, 27.657 84.619, 27.649 84.61, 27.643 84.605, 27.631 84.579, 27.619 84.545, 27.614 84.525, 27.613 84.522, 27.621 84.512, 27.638 84.504, 27.655 84.494, 27.651 84.483, 27.619 84.468, 27.597 84.453, 27.589 84.441, 27.591 84.433, 27.601 84.426, 27.645 84.416, 27.674 84.398, 27.733 84.359, 27.777 84.322, 27.799 84.295, 27.81 84.279, 27.815 84.266, 27.821 84.225, 27.858 84.204, 27.875 84.191, 27.888 84.17, 27.883 84.136, 27.89 84.111, 27.888 84.032, 27.89 84.005, 27.871 83.968, 27.871 83.943, 27.862 83.932, 27.813 83.907, 27.793 83.901, 27.772 83.896, 27.761 83.89, 27.755 83.882, 27.752 83.877, 27.76 83.873, 27.767 83.872, 27.778 83.876, 27.782 83.879, 27.796 83.88, 27.805 83.868, 27.8 83.856, 27.789 83.846, 27.771 83.838, 27.73 83.831, 27.729 83.825, 27.741 83.814, 27.745 83.806, 27.747 83.791, 27.75 83.789, 27.767 83.775, 27.792 83.757, 27.809 83.731, 27.817 83.714, 27.821 83.627, 27.836 83.605, 27.842 83.589, 27.845 83.552, 27.833 83.532, 27.832 83.517, 27.853 83.494, 27.866 83.474, 27.866 83.461, 27.874 83.449, 27.918 83.427, 27.921 83.418, 27.897 83.409, 27.898 83.406, 27.914 83.398, 27.915 83.382, 27.913 83.358, 27.897 83.345, 27.894 83.332, 27.898 83.318, 27.906 83.307, 27.957 83.261, 27.963 83.237, 27.958 83.221, 27.955 83.196, 27.942 83.189, 27.931 83.179, 27.939 83.159, 27.937 83.138, 27.92 83.127, 27.89 83.123, 27.862 83.103, 27.839 83.103, 27.833 83.089, 27.836 83.076, 27.831 83.067, 27.817 83.058, 27.817 83.05, 27.831 83.042, 27.831 83.026, 27.82 83.01, 27.812 82.993, 27.832 82.992, 27.882 82.98, 27.928 82.97, 27.967 82.962, 28.019 82.952, 28.036 82.949, 28.132 82.942, 28.229 82.943, 28.364 82.949, 28.479 82.953, 28.496 82.953, 28.579 82.954, 28.676 82.955, 28.698 82.956, 28.779 82.955, 28.83 82.954, 28.875 82.948, 28.942 82.947, 28.973 82.93, 28.99 82.919, 29.035 82.896, 29.071 82.878, 29.101 82.887, 29.117 82.901, 29.148 82.897, 29.164 82.887, 29.186 82.878, 29.236 82.858, 29.252 82.866, 29.265 82.873, 29.305 82.884, 29.336 82.899, 29.38 82.921, 29.423 82.949, 29.43 82.955, 29.44 82.962, 29.445 82.961, 29.446 82.978, 29.458 82.981, 29.469 82.979, 29.475 82.982, 29.471 82.99, 29.478 82.991, 29.484 82.996, 29.485 83, 29.5 83.001, 29.506 82.994, 29.522 82.999, 29.532 83.02, 29.542 83.02, 29.607 83.029, 29.655 83.035, 29.704 83.042, 29.714 83.044, 29.823 83.071, 29.907 83.093, 29.932 83.1, 30.051 83.135, 30.137 83.155, 30.173 83.162, 30.238 83.171, 30.252 83.172, 30.353 83.171, 30.406 83.171, 30.421 83.172, 30.483 83.178, 30.561 83.185, 30.671 83.184, 30.846 83.178, 30.877 83.176, 30.94 83.171, 30.998 83.163, 31.172 83.148, 31.211 83.148, 31.222 83.131, 31.255 83.108, 31.282 83.085, 31.305 83.063, 31.324 83.044, 31.327 83.045, 31.363 83.024, 31.398 83.005, 31.428 82.982, 31.441 82.97, 31.442 82.969, 31.515 82.939, 31.591 82.903, 31.595 82.904, 31.607 82.898, 31.625 82.895, 31.839 82.891, 31.86 82.881, 31.914 82.868, 31.981 82.853, 31.998 82.847, 32.045 82.832, 32.085 82.826, 32.107 82.812, 32.125 82.802, 32.148 82.793, 32.166 82.787, 32.225 82.766, 32.283 82.746, 32.331 82.729, 32.339 82.725, 32.348 82.72, 32.416 82.696, 32.48 82.678, 32.524 82.663, 32.608 82.638, 32.684 82.617, 32.739 82.619, 32.763 82.607, 32.764 82.6, 32.773 82.599, 32.823 82.586, 32.887 82.574, 32.973 82.561, 32.972 82.566, 32.981 82.569, 32.984 82.569, 32.966 82.582, 32.937 82.601, 32.902 82.615, 32.885 82.625, 32.878 82.638, 32.868 82.673, 32.861 82.692, 32.844 82.711, 32.8 82.75, 32.751 82.799, 32.701 82.828, 32.652 82.858, 32.63 82.878, 32.597 82.892, 32.573 82.907, 32.566 82.915, 32.545 82.967, 32.544 82.97, 32.403 83.092, 32.355 83.133, 32.374 83.193, 32.417 83.274, 32.374 83.287, 32.232 83.328, 32.218 83.333, 32.157 83.364, 32.114 83.378, 32.104 83.383, 32.097 83.388, 32.094 83.413, 32.074 83.451, 32.073 83.462, 32.075 83.487, 32.083 83.521, 32.094 83.552, 32.103 83.585, 32.119 83.626, 32.14 83.667, 32.153 83.698, 32.147 83.709, 32.143 83.745, 32.191 83.858, 32.184 83.902, 32.176 83.947, 32.161 83.966, 32.153 83.978, 32.137 84.012, 32.13 84.012, 32.129 84.025, 32.132 84.035, 32.138 84.046, 32.149 84.083, 32.155 84.098, 32.166 84.122, 32.175 84.146, 32.197 84.183, 32.236 84.252, 32.252 84.282, 32.269 84.317, 32.276 84.366, 32.343 84.411, 32.39 84.466, 32.414 84.513, 32.45 84.557, 32.456 84.566, 32.485 84.618, 32.491 84.639, 32.547 84.706, 32.551 84.72, 32.568 84.749, 32.593 84.769, 32.595 84.778, 32.608 84.791, 32.607 84.804, 32.655 84.81, 32.655 84.822, 32.664 84.842, 32.692 84.877, 32.702 84.896, 32.719 84.934, 32.734 84.951, 32.757 84.991, 32.774 85.012, 32.816 85.058, 32.872 85.108, 32.897 85.135, 32.946 85.205, 32.981 85.253, 33.002 85.28, 33.027 85.306, 33.05 85.332, 33.097 85.385, 32.963 85.422, 32.759 85.467, 32.735 85.473, 32.642 85.495, 32.386 85.551, 32.377 85.555, 32.293 85.568, 32.167 85.601, 32.062 85.638, 31.924 85.652, 31.914 85.657, 31.85 85.699, 31.843 85.706, 31.9 85.804, 31.82 85.838, 31.806 85.818, 31.694 85.82, 31.587 85.82, 31.53 85.822, 31.357 85.824, 31.311 85.843, 31.207 85.869, 31.181 85.879, 31.101 85.895, 31.093 85.866, 31.043 85.858, 31.01 85.859, 30.947 85.868, 30.933 85.82, 30.915 85.822, 30.913 85.819, 30.684 85.868, 30.604 85.885, 30.588 85.894, 30.59 85.914, 30.598 85.941, 30.524 85.96, 30.459 85.98, 30.368 86.015, 30.337 86.03, 30.33 86.044, 30.33 86.055, 30.203 86.072, 30.08 86.05, 30.054 86.099, 29.986 86.095, 29.948 86.107, 29.887 86.11, 29.851 86.106, 29.822 86.113, 29.812 86.111, 29.795 86.102, 29.77 86.097, 29.77 86.1, 29.763 86.099, 29.763 86.101, 29.737 86.095, 29.714 86.098, 29.717 86.118, 29.611 86.13, 29.514 86.146, 29.38 86.176, 29.344 86.188, 29.283 86.205, 29.232 86.216, 29.192 86.223, 29.024 86.256, 28.979 86.262, 28.94 86.269, 28.815 86.299, 28.789 86.308, 28.695 86.332, 28.453 86.378, 28.307 86.399, 28.256 86.413, 28.128 86.434, 28.101 86.44, 27.94 86.46, 27.885 86.465, 27.819 86.467, 27.668 86.477, 27.614 86.48, 27.576 86.482, 27.519 86.487, 27.448 86.49, 27.378 86.493, 27.331 86.494, 27.291 86.494, 27.139 86.51, 27.057 86.518, 27.02 86.52))', 0);  
----SET @g = geometry::Parse('CURVEPOLYGON(CIRCULARSTRING(0 0, 3 0, 3 3, 0 3, 0 0))');  
SELECT @g.STArea();  
